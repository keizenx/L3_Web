@model IITWebApp.Models.CreateEtudiantViewModel

@{
    ViewData["Title"] = "Nouvel Étudiant";
}

<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Nouvel Étudiant</h1>
        <a href="/Etudiants" class="btn btn-secondary btn-sm">
            <i class="fas fa-arrow-left fa-sm"></i> Retour à la liste
        </a>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Informations de l'Étudiant</h6>
        </div>
        <div class="card-body">
            <form asp-action="Create" method="post">
                <div asp-validation-summary="All" class="text-danger"></div>
                
                <!-- Section Génération Automatique -->
                <div class="alert alert-info mb-4">
                    <h5><i class="fas fa-magic me-2"></i>Génération Automatique du Matricule</h5>
                    <p class="mb-0">Le matricule sera généré automatiquement au format <strong>IIT2025L1001</strong>, <strong>IIT2025L2001</strong>, etc. selon le niveau sélectionné.</p>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Niveau" class="form-label">Niveau d'études *</label>
                            <select name="Niveau" id="Niveau" class="form-select" required>
                                <option value="">Sélectionner le niveau...</option>
                                <option value="L1">Licence 1 (L1)</option>
                                <option value="L2">Licence 2 (L2)</option>
                                <option value="L3">Licence 3 (L3)</option>
                                <option value="M1">Master 1 (M1)</option>
                                <option value="M2">Master 2 (M2)</option>
                            </select>
                            <span asp-validation-for="Niveau" class="text-danger"></span>
                            <small class="form-text text-muted">
                                Le matricule sera généré automatiquement selon ce niveau
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label">Matricule (Auto-généré)</label>
                            <input type="text" class="form-control bg-light" value="Sera généré automatiquement" readonly />
                            <small class="form-text text-success">
                                <i class="fas fa-check-circle"></i> Génération automatique activée
                            </small>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Sexe" class="form-label">Sexe *</label>
                            <select name="Sexe" id="Sexe" class="form-select" required>
                                <option value="">Sélectionner...</option>
                                <option value="M">Masculin</option>
                                <option value="F">Féminin</option>
                            </select>
                            <span asp-validation-for="Sexe" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Nationalite" class="form-label">Nationalité</label>
                            <input name="Nationalite" id="Nationalite" class="form-control" value="Ivoirien" maxlength="50" />
                            <span asp-validation-for="Nationalite" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Nom" class="form-label">Nom *</label>
                            <input name="Nom" id="Nom" class="form-control" required maxlength="50" />
                            <span asp-validation-for="Nom" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Prenom" class="form-label">Prénom *</label>
                            <input name="Prenom" id="Prenom" class="form-control" required maxlength="50" />
                            <span asp-validation-for="Prenom" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="DateNaissance" class="form-label">Date de Naissance *</label>
                            <input name="DateNaissance" id="DateNaissance" type="date" class="form-control" required />
                            <span asp-validation-for="DateNaissance" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="LieuNaissance" class="form-label">Lieu de Naissance</label>
                            <input name="LieuNaissance" id="LieuNaissance" class="form-control" maxlength="100" />
                            <span asp-validation-for="LieuNaissance" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Telephone" class="form-label">Téléphone</label>
                            <input name="Telephone" id="Telephone" class="form-control" maxlength="20" />
                            <span asp-validation-for="Telephone" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="Email" class="form-label">Email</label>
                            <input name="Email" id="Email" type="email" class="form-control" maxlength="100" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                    </div>
                </div>


                <div class="mb-3">
                    <label for="Adresse" class="form-label">Adresse</label>
                    <textarea name="Adresse" id="Adresse" class="form-control" rows="3"></textarea>
                    <span asp-validation-for="Adresse" class="text-danger"></span>
                </div>

                <div class="d-flex justify-content-between">
                    <a href="/Etudiants" class="btn btn-secondary">Annuler</a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Enregistrer
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/matricule-generator.js"></script>
    
    <script>
        // Animation pour la section de génération automatique
        document.addEventListener('DOMContentLoaded', function() {
            const alertBox = document.querySelector('.alert-info');
            if (alertBox) {
                alertBox.style.opacity = '0';
                alertBox.style.transform = 'translateY(-20px)';
                
                setTimeout(() => {
                    alertBox.style.transition = 'all 0.5s ease';
                    alertBox.style.opacity = '1';
                    alertBox.style.transform = 'translateY(0)';
                }, 200);
            }
        });
    </script>
}
